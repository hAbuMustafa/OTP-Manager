{% extends 'layout.html' %}

{% set title = "Register" %}

{% set heading = "Register for an account" %}

{% block content %}
  <form action="{{ url_for('register') }}" method="post">
    <div class="mb-3">
      <input type="text" name="username" placeholder="Username" class="form-control mx-auto w-auto" pattern="^[A-Za-z][A-Za-z0-9_]{4,}$" title="Username should be: 5+ characters, and contains only characters and digits and underscores" required autofocus />
    </div>
    <div class="mb-3">
      <input type="password" name="password" placeholder="Password" class="form-control mx-auto w-auto" pattern=".{6,}" required />
    </div>
    <div class="mb-3">
      <input type="password" name="confirmation" placeholder="Confirm Password" class="form-control mx-auto w-auto" required />
    </div>
    <input type="submit" value="Register" class="btn btn-primary" />
  </form>
  <p class="mt-5">Already have an account? <a href="{{ url_for('login') }}">Login</a></p>

  <script>
    const pwInputs = document.querySelectorAll('[type="password"]');
    const form = document.querySelector('form');
    pwInputs.forEach(input => {
      input.addEventListener('input', () => {
        if (pwInputs[0].value === pwInputs[1].value) {
          pwInputs.forEach(input => input.classList.remove('is-invalid'));
        } else {
          pwInputs.forEach(input => input.classList.add('is-invalid'));
        }
      });
    });
  </script>
{% endblock %}